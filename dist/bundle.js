!function(e){function n(a){if(t[a])return t[a].exports;var m=t[a]={i:a,l:!1,exports:{}};return e[a].call(m.exports,m,m.exports,n),m.l=!0,m.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=7)}([function(e,n){function t(e){function n(e){}function t(e){}function a(n){if(null!=u.mesh){var t=u.mesh.meshArray,a=n.target.getBoundingClientRect();u.x=n.clientX-a.left,u.y=n.clientY-a.top;var m=u.x,r=u.y;u.latitude=Math.round(1e4*(e.mapInfo.startLatitude-r*e.mapInfo.widthLongitude),4)/1e4,u.longitude=Math.round(1e4*(e.mapInfo.startLongitude+m*e.mapInfo.widthLatitude),4)/1e4,document.getElementById("pos").innerHTML="("+m+" , "+r+")",document.getElementById("lati").innerHTML="("+u.latitude+" , "+u.longitude+")",document.getElementById("value").innerHTML=t[r][m]+" mm",document.getElementById("v_m2m2").innerHTML=o(r-2,m-2),document.getElementById("v_m1m2").innerHTML=o(r-2,m-1),document.getElementById("v_0m2").innerHTML=o(r-2,m),document.getElementById("v_p1m2").innerHTML=o(r-2,m+1),document.getElementById("v_p2m2").innerHTML=o(r-2,m+2),document.getElementById("v_m2m1").innerHTML=o(r-1,m-2),document.getElementById("v_m1m1").innerHTML=o(r-1,m-1),document.getElementById("v_0m1").innerHTML=o(r-1,m),document.getElementById("v_p1m1").innerHTML=o(r-1,m+1),document.getElementById("v_p2m1").innerHTML=o(r-1,m+2),document.getElementById("v_m20").innerHTML=o(r,m-2),document.getElementById("v_m10").innerHTML=o(r,m-1),document.getElementById("v_00").innerHTML=o(r,m),document.getElementById("v_p10").innerHTML=o(r,m+1),document.getElementById("v_p20").innerHTML=o(r,m+2),document.getElementById("v_m2p1").innerHTML=o(r+1,m-2),document.getElementById("v_m1p1").innerHTML=o(r+1,m-1),document.getElementById("v_0p1").innerHTML=o(r+1,m),document.getElementById("v_p1p1").innerHTML=o(r+1,m+1),document.getElementById("v_p2p1").innerHTML=o(r+1,m+2),document.getElementById("v_m2p2").innerHTML=o(r+2,m-2),document.getElementById("v_m1p2").innerHTML=o(r+2,m-1),document.getElementById("v_0p2").innerHTML=o(r+2,m),document.getElementById("v_p1p2").innerHTML=o(r+2,m+1),document.getElementById("v_p2p2").innerHTML=o(r+2,m+2),d3.select("svg#latitude_line polyline").transition().duration(100).attr("points",t[r].map(function(e,n){return n+" "+(56-50*(Number(e)-u.min)/(u.max-u.min))}).join(","));for(var i=[],d=0;d<t.length;d++)i.push(t[d][m]);d3.select("svg#longitude_line polyline").transition().duration(100).attr("points",i.map(function(e,n){return 60-50*(Number(e)-u.min)/(u.max-u.min)+" "+n}).join(","))}}function m(e){if(null!=u.mesh){var n=u.x,t=u.y;u.fix_x=n,u.fix_y=t;var a=i(t),m=d(n);u.params.clickHandlers.forEach(function(e){e({latitude:a,longitude:m,value:u.mesh.meshArray[t][n]})}),r()}}function r(){var e=u.fix_x,n=u.fix_y,t=i(n),a=d(e),m=u.mesh.meshArray;document.getElementById("click_pos").innerHTML="("+e+" , "+n+")",document.getElementById("click_lati").innerHTML="("+t+" , "+a+")",document.getElementById("click_value").innerHTML=m[n][e]+" mm",document.getElementById("f_m2m2").innerHTML=o(n-2,e-2),document.getElementById("f_m1m2").innerHTML=o(n-2,e-1),document.getElementById("f_0m2").innerHTML=o(n-2,e),document.getElementById("f_p1m2").innerHTML=o(n-2,e+1),document.getElementById("f_p2m2").innerHTML=o(n-2,e+2),document.getElementById("f_m2m1").innerHTML=o(n-1,e-2),document.getElementById("f_m1m1").innerHTML=o(n-1,e-1),document.getElementById("f_0m1").innerHTML=o(n-1,e),document.getElementById("f_p1m1").innerHTML=o(n-1,e+1),document.getElementById("f_p2m1").innerHTML=o(n-1,e+2),document.getElementById("f_m20").innerHTML=o(n,e-2),document.getElementById("f_m10").innerHTML=o(n,e-1),document.getElementById("f_00").innerHTML=o(n,e),document.getElementById("f_p10").innerHTML=o(n,e+1),document.getElementById("f_p20").innerHTML=o(n,e+2),document.getElementById("f_m2p1").innerHTML=o(n+1,e-2),document.getElementById("f_m1p1").innerHTML=o(n+1,e-1),document.getElementById("f_0p1").innerHTML=o(n+1,e),document.getElementById("f_p1p1").innerHTML=o(n+1,e+1),document.getElementById("f_p2p1").innerHTML=o(n+1,e+2),document.getElementById("f_m2p2").innerHTML=o(n+2,e-2),document.getElementById("f_m1p2").innerHTML=o(n+2,e-1),document.getElementById("f_0p2").innerHTML=o(n+2,e),document.getElementById("f_p1p2").innerHTML=o(n+2,e+1),document.getElementById("f_p2p2").innerHTML=o(n+2,e+2)}function o(e,n){var t=u.mesh.meshArray;return n<0||e<0||t[0].length<=n||t.length<=e?"-":t[e][n]}function i(e){return Math.round(1e4*(u.params.mapInfo.startLatitude-e*u.params.mapInfo.widthLongitude),4)/1e4}function d(e){return Math.round(1e4*(u.params.mapInfo.startLongitude+e*u.params.mapInfo.widthLatitude),4)/1e4}var u=this;u.params=e,u.canvas=document.getElementById("mycanvas"),u.context=u.canvas.getContext("2d"),u.mesh=null,u.x=0,u.y=0,u.fix_x=0,u.fix_y=0,u.canvas.addEventListener("mouseover",n,!1),u.canvas.addEventListener("mouseout",t,!1),u.canvas.addEventListener("mousemove",a,!1),u.canvas.addEventListener("click",m,!1),u.drawMesh=function(e){u.mesh=e;var n=e.meshArray;u.canvas.width=n[0].length,u.canvas.height=n.length;for(var t=10,a=0,m=Array.prototype.concat.apply([],n),o=0;o<m.length;o++)t<Number(m[o])?t=m[o]:a>Number(m[o])&&(a=m[o]);u.max=t,u.min=a;for(var i=u.context.getImageData(0,0,u.canvas.width,u.canvas.height),d=i.width,c=i.height,l=i.data,s=0;s<c;++s)for(var p=0;p<d;++p){var f=4*(s*d+p),g=n[s][p],v=255*(g-a)/(t-a),y=255-v;l[f+0]=y,l[f+1]=y,l[f+2]=y,l[f+3]=255}u.canvas.style.display="block",document.getElementById("drop_msg").style.display="none",u.context.putImageData(i,0,0),document.getElementById("file_name").innerHTML=e.name,r()}}e.exports=t},function(e,n,t){function a(e){function n(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function t(n){n.stopPropagation(),n.preventDefault();for(var t,a=n.dataTransfer.files,r=[],o=0;t=a[o];o++)r.push(t);r.sort(function(e,n){return e.name>n.name?1:e.name<n.name?-1:0});for(var o=0;o<r.length;o++){var t=r[o],i=(escape(t.name),new FileReader);i.onload=function(n){return function(t){var a=new m(n.name,t.target.result);e.createMeshHandlers.forEach(function(e){e(a)})}}(t),i.readAsText(t)}}this.params=e;var a=document.getElementById(e.id);a.addEventListener("dragover",n,!1),a.addEventListener("drop",t,!1)}var m=t(6);e.exports=a},function(e,n){function t(e){function n(){document.getElementById(t.params.id).innerHTML=t.meshes.map(function(e){return e==t.active?'<li class="selected-csv"><b>'+e.name+"</b></li>":"<li>"+e.name+"</li>"}).join("\n")}var t=this;t.params=e,t.meshes=null,t.active=null,t.updateList=function(e){t.meshes=e,n()},t.updateActive=function(e){t.active=e,n()}}e.exports=t},function(e,n){function t(e){var n=this;n.params=e;var t=new google.maps.LatLng(38.65,138.25),a={zoom:5,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP};n.map=new google.maps.Map(document.getElementById(e.id),a),n.marker=new google.maps.Marker({position:t}),n.heatmap=null,n.setHeartMap=function(t){for(var a=t.meshArray,m=20,r=0,o=Array.prototype.concat.apply([],a),i=0;i<o.length;i++)m<o[i]?m=o[i]:r>o[i]&&(r=o[i]);for(var d=a[0].length,u=a.length,c=[],l=0;l<u;++l)for(var s=0;s<d;++s){var p=a[l][s],f=255*(p-r)/(m-r),g=e.mapInfo.startLatitude-l*e.mapInfo.widthLongitude,v=e.mapInfo.startLongitude+s*e.mapInfo.widthLatitude;0!=f&&c.push({location:new google.maps.LatLng(g,v),weight:f})}null!=n.heatmap&&(n.heatmap.setMap(null),n.heatmap.setData([])),n.heatmap=new google.maps.visualization.HeatmapLayer({data:c,radius:10,maxIntensity:255,opacity:.4}),n.heatmap.setMap(n.map)},n.setMarker=function(e){var t=new google.maps.LatLng(e.latitude,e.longitude);n.map.panTo(t),n.marker.setMap(n.map),n.marker.setPosition(t)}}e.exports=t},function(e,n){e.exports={startLatitude:46.7,startLongitude:120,widthLatitude:.0625,widthLongitude:.05}},function(e,n){function t(e){function n(){a.params.changeActiveMeshHandlers.forEach(function(e){e(a.active)})}function t(){for(var e=0;e<a.meshes.length;e++)if(a.meshes[e]==a.active)return e;return 0}var a=this;a.params=e,a.meshes=[],a.active=null,a.add=function(e){a.meshes.push(e),a.meshes.sort(function(e,n){return e.name>n.name?1:e.name<n.name?-1:0}),a.params.changeCollectionHandlers.forEach(function(e){e(a.meshes)}),null==a.active&&(a.active=e,n())},a.pre=function(){var e=t();e-=1,e<0&&(e=a.meshes.length-1),a.active=a.meshes[e],n()},a.next=function(){var e=t();e+=1,e>=a.meshes.length&&(e=0),a.active=a.meshes[e],n()}}e.exports=t},function(e,n){function t(e,n){function t(e){return e.split("\n").filter(function(e){return""!=e}).map(function(e){return e.split(",").filter(function(e){return""!=e})})}var a=this;a.name=e,a.meshArray=t(n)}e.exports=t},function(e,n,t){var a=t(3),m=t(1),r=t(0),o=t(5),i=t(2),d=t(4),u=new a({id:"map_canvas",mapInfo:d}),c=new r({id:"mycanvas",mapInfo:d,moveHandlers:[],clickHandlers:[u.setMarker]}),l=new i({id:"file_list"}),s=new o({changeCollectionHandlers:[l.updateList],changeActiveMeshHandlers:[c.drawMesh,u.setHeartMap,l.updateActive]});new m({id:"drop_zone",createMeshHandlers:[s.add]});window.onload=function(){document.getElementById("pre_mesh").onclick=function(){s.pre()},document.getElementById("next_mesh").onclick=function(){s.next()}}}]);