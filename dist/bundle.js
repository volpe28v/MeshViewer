!function(e){function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=10)}([function(e,n){function t(e){function n(e){}function t(e){}function a(e){if(null!=i.mesh){var n=e.target.getBoundingClientRect();i.x=e.clientX-n.left,i.y=e.clientY-n.top,i.params.moveHandlers.forEach(function(e){e({x:i.x,y:i.y})})}}function r(e){if(null!=i.mesh){var n=i.x,t=i.y;i.fix_x=n,i.fix_y=t,i.params.clickHandlers.forEach(function(e){e({x:n,y:t})})}}var i=this;i.params=e,i.canvas=document.getElementById("mycanvas"),i.context=i.canvas.getContext("2d"),i.mesh=null,i.canvas.addEventListener("mouseover",n,!1),i.canvas.addEventListener("mouseout",t,!1),i.canvas.addEventListener("mousemove",a,!1),i.canvas.addEventListener("click",r,!1),i.drawMesh=function(e){i.mesh=e;var n=e.meshArray;i.canvas.width=n[0].length,i.canvas.height=n.length;var t=Array.prototype.concat.apply([],n),a=d3.max(t,function(e){return Number(e)});a=a>10?a:10,i.max=a;for(var r=i.context.getImageData(0,0,i.canvas.width,i.canvas.height),m=r.width,o=r.height,d=r.data,u=0;u<o;++u)for(var c=0;c<m;++c){var s=4*(u*m+c),l=n[u][c],p=255*l/a,f=255-p;d[s+0]=f,d[s+1]=f,d[s+2]=f,d[s+3]=255}i.canvas.style.display="block",document.getElementById("drop_msg").style.display="none",i.context.putImageData(r,0,0),document.getElementById("file_name").innerHTML=e.name}}e.exports=t},function(e,n,t){function a(e){function n(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function t(n){n.stopPropagation(),n.preventDefault();for(var t,a=n.dataTransfer.files,i=[],m=0;t=a[m];m++)i.push(t);i.sort(function(e,n){return e.name>n.name?1:e.name<n.name?-1:0});for(var m=0;m<i.length;m++){var t=i[m],o=(escape(t.name),new FileReader);o.onload=function(n){return function(t){var a=new r(n.name,t.target.result);e.createMeshHandlers.forEach(function(e){e(a)})}}(t),o.readAsText(t)}}this.params=e;var a=document.getElementById(e.id);a.addEventListener("dragover",n,!1),a.addEventListener("drop",t,!1)}var r=t(9);e.exports=a},function(e,n){function t(e){function n(){document.getElementById(t.params.id).innerHTML=t.meshes.map(function(e){return e==t.active?'<li class="selected-csv">'+e.name+"</li>":"<li>"+e.name+"</li>"}).join("\n")}var t=this;t.params=e,t.meshes=null,t.active=null,t.updateList=function(e){t.meshes=e,n()},t.updateActive=function(e){t.active=e,n()}}e.exports=t},function(e,n){function t(e){var n=this;n.params=e;var t=new google.maps.LatLng(38.65,138.25),a={zoom:5,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP};n.map=new google.maps.Map(document.getElementById(e.id),a),n.marker=new google.maps.Marker({position:t}),n.heatmap=null,n.setHeartMap=function(e){for(var t=e.meshArray,a=20,r=0,i=Array.prototype.concat.apply([],t),m=0;m<i.length;m++)a<i[m]?a=i[m]:r>i[m]&&(r=i[m]);for(var o=t[0].length,d=t.length,u=[],c=0;c<d;++c)for(var s=0;s<o;++s){var l=t[c][s],p=255*(l-r)/(a-r),f=n.params.mapInfo.getLatitude(c),g=n.params.mapInfo.getLongitude(s);0!=p&&u.push({location:new google.maps.LatLng(f,g),weight:p})}null!=n.heatmap&&(n.heatmap.setMap(null),n.heatmap.setData([])),n.heatmap=new google.maps.visualization.HeatmapLayer({data:u,radius:10,maxIntensity:255,opacity:.4}),n.heatmap.setMap(n.map)},n.setMarker=function(e){var t=n.params.mapInfo.getLatitude(e.y),a=n.params.mapInfo.getLongitude(e.x),r=new google.maps.LatLng(t,a);n.map.panTo(r),n.marker.setMap(n.map),n.marker.setPosition(r)}}e.exports=t},function(e,n){e.exports={startLatitude:46.7,startLongitude:120,widthLatitude:.0625,widthLongitude:.05,getLatitude:function(e){return Math.round(1e4*(this.startLatitude-e*this.widthLongitude),4)/1e4},getLongitude:function(e){return Math.round(1e4*(this.startLongitude+e*this.widthLatitude),4)/1e4}}},function(e,n){function t(e){function n(){a.params.changeActiveMeshHandlers.forEach(function(e){e(a.active)})}function t(){for(var e=0;e<a.meshes.length;e++)if(a.meshes[e]==a.active)return e;return 0}var a=this;a.params=e,a.meshes=[],a.active=null,a.add=function(e){a.meshes.push(e),a.meshes.sort(function(e,n){return e.name>n.name?1:e.name<n.name?-1:0}),a.params.changeCollectionHandlers.forEach(function(e){e(a.meshes)}),null==a.active&&(a.active=e,n())},a.pre=function(){var e=t();e-=1,e<0&&(e=a.meshes.length-1),a.active=a.meshes[e],n()},a.next=function(){var e=t();e+=1,e>=a.meshes.length&&(e=0),a.active=a.meshes[e],n()}}e.exports=t},function(e,n){function t(e){function n(){var e=r.x,n=r.y,t=r.params.mapInfo.getLatitude(n),i=r.params.mapInfo.getLongitude(e),m=r.mesh.meshArray;document.getElementById("pos").innerHTML="("+e+" , "+n+")",document.getElementById("lati").innerHTML="("+t+" , "+i+")",document.getElementById("value").innerHTML=m[n][e]+" mm",document.getElementById("v_m2m2").innerHTML=a(n-2,e-2),document.getElementById("v_m1m2").innerHTML=a(n-2,e-1),document.getElementById("v_0m2").innerHTML=a(n-2,e),document.getElementById("v_p1m2").innerHTML=a(n-2,e+1),document.getElementById("v_p2m2").innerHTML=a(n-2,e+2),document.getElementById("v_m2m1").innerHTML=a(n-1,e-2),document.getElementById("v_m1m1").innerHTML=a(n-1,e-1),document.getElementById("v_0m1").innerHTML=a(n-1,e),document.getElementById("v_p1m1").innerHTML=a(n-1,e+1),document.getElementById("v_p2m1").innerHTML=a(n-1,e+2),document.getElementById("v_m20").innerHTML=a(n,e-2),document.getElementById("v_m10").innerHTML=a(n,e-1),document.getElementById("v_00").innerHTML=a(n,e),document.getElementById("v_p10").innerHTML=a(n,e+1),document.getElementById("v_p20").innerHTML=a(n,e+2),document.getElementById("v_m2p1").innerHTML=a(n+1,e-2),document.getElementById("v_m1p1").innerHTML=a(n+1,e-1),document.getElementById("v_0p1").innerHTML=a(n+1,e),document.getElementById("v_p1p1").innerHTML=a(n+1,e+1),document.getElementById("v_p2p1").innerHTML=a(n+1,e+2),document.getElementById("v_m2p2").innerHTML=a(n+2,e-2),document.getElementById("v_m1p2").innerHTML=a(n+2,e-1),document.getElementById("v_0p2").innerHTML=a(n+2,e),document.getElementById("v_p1p2").innerHTML=a(n+2,e+1),document.getElementById("v_p2p2").innerHTML=a(n+2,e+2)}function t(){var e=r.fix_x,n=r.fix_y,t=r.params.mapInfo.getLatitude(n),i=r.params.mapInfo.getLongitude(e),m=r.mesh.meshArray;document.getElementById("click_pos").innerHTML="("+e+" , "+n+")",document.getElementById("click_lati").innerHTML="("+t+" , "+i+")",document.getElementById("click_value").innerHTML=m[n][e]+" mm",document.getElementById("f_m2m2").innerHTML=a(n-2,e-2),document.getElementById("f_m1m2").innerHTML=a(n-2,e-1),document.getElementById("f_0m2").innerHTML=a(n-2,e),document.getElementById("f_p1m2").innerHTML=a(n-2,e+1),document.getElementById("f_p2m2").innerHTML=a(n-2,e+2),document.getElementById("f_m2m1").innerHTML=a(n-1,e-2),document.getElementById("f_m1m1").innerHTML=a(n-1,e-1),document.getElementById("f_0m1").innerHTML=a(n-1,e),document.getElementById("f_p1m1").innerHTML=a(n-1,e+1),document.getElementById("f_p2m1").innerHTML=a(n-1,e+2),document.getElementById("f_m20").innerHTML=a(n,e-2),document.getElementById("f_m10").innerHTML=a(n,e-1),document.getElementById("f_00").innerHTML=a(n,e),document.getElementById("f_p10").innerHTML=a(n,e+1),document.getElementById("f_p20").innerHTML=a(n,e+2),document.getElementById("f_m2p1").innerHTML=a(n+1,e-2),document.getElementById("f_m1p1").innerHTML=a(n+1,e-1),document.getElementById("f_0p1").innerHTML=a(n+1,e),document.getElementById("f_p1p1").innerHTML=a(n+1,e+1),document.getElementById("f_p2p1").innerHTML=a(n+1,e+2),document.getElementById("f_m2p2").innerHTML=a(n+2,e-2),document.getElementById("f_m1p2").innerHTML=a(n+2,e-1),document.getElementById("f_0p2").innerHTML=a(n+2,e),document.getElementById("f_p1p2").innerHTML=a(n+2,e+1),document.getElementById("f_p2p2").innerHTML=a(n+2,e+2)}function a(e,n){var t=r.mesh.meshArray;return n<0||e<0||t[0].length<=n||t.length<=e?"-":t[e][n]}var r=this;r.params=e,r.mesh=null,r.x=0,r.y=0,r.fix_x=0,r.fix_y=0,r.setMesh=function(e){r.mesh=e,n(),t()},r.updateCoordinate=function(e){r.x=e.x,r.y=e.y,n()},r.updateFixedCoordinate=function(e){r.fix_x=e.x,r.fix_y=e.y,t()}}e.exports=t},function(e,n){function t(){function e(){var e=n.x,t=n.y,a=n.mesh.meshArray,r=d3.scaleLinear().domain([0,n.max]).range([55,5]);d3.select("svg#latitude_line polyline").transition().duration(100).attr("points",a[t].map(function(e,n){return n+" "+r(Number(e))}).join(","));var i=d3.scaleLinear().domain([0,n.max]).range([58,8]),m=a.map(function(n){return n[e]});d3.select("svg#longitude_line polyline").transition().duration(100).attr("points",m.map(function(e,n){return i(Number(e))+" "+n}).join(","))}var n=this;n.mesh=null,n.x=0,n.y=0,n.setMesh=function(t){n.mesh=t;var a=t.meshArray,r=Array.prototype.concat.apply([],a),i=d3.max(r,function(e){return Number(e)});i=i>10?i:10,n.max=i,e()},n.updateCoordinate=function(t){n.x=t.x,n.y=t.y,e()}}e.exports=t},function(e,n){function t(){function e(){var e=n.x,t=n.y,a=n.meshes.map(function(n){return{name:n.name,value:Number(n.meshArray[t][e])}}),r=d3.max(a,function(e){return e.value}),i=d3.scaleLinear().domain([0,r]).range([0,200]),m=d3.select("svg#timeline").selectAll("rect").data(a);m.enter().append("rect"),m.exit().remove(),m.attr("x",function(e,n){return 30*n}).attr("y",0).attr("width",20).attr("height",function(e){return i(e.value)}).attr("fill","deepskyblue")}var n=this;n.meshes=null,n.active=null,n.x=0,n.y=0,n.updateMeshes=function(t){n.meshes=t,e()},n.updateActive=function(e){n.active=e},n.updateCoordinate=function(t){n.x=t.x,n.y=t.y,e()}}e.exports=t},function(e,n){function t(e,n){function t(e){return e.split("\n").filter(function(e){return""!=e}).map(function(e){return e.split(",").filter(function(e){return""!=e})})}var a=this;a.name=e,a.meshArray=t(n)}e.exports=t},function(e,n,t){var a=t(3),r=t(1),i=t(0),m=t(5),o=t(2),d=t(6),u=t(7),c=t(8),s=t(4),l=new a({id:"map_canvas",mapInfo:s}),p=new d({mapInfo:s}),f=new u,g=new c,y=new i({id:"mycanvas",mapInfo:s,moveHandlers:[p.updateCoordinate,f.updateCoordinate],clickHandlers:[l.setMarker,p.updateFixedCoordinate,g.updateCoordinate]}),v=new o({id:"file_list"}),h=new m({changeCollectionHandlers:[v.updateList,g.updateMeshes],changeActiveMeshHandlers:[y.drawMesh,l.setHeartMap,v.updateActive,p.setMesh,f.setMesh,g.updateActive]});new r({id:"drop_zone",createMeshHandlers:[h.add]});window.onload=function(){document.getElementById("pre_mesh").onclick=function(){h.pre()},document.getElementById("next_mesh").onclick=function(){h.next()}}}]);